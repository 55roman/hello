package ffroman.effects {	import flash.display.*;	import flash.events.*;	import flash.text.*;	import flash.utils.Timer;
	public class TyporingA extends Sprite{                private var _field:TextField;                private var _rndChar:String = "_+*/_____________________________________%";				private var _useTimer:Boolean;				private var _timerSpan:Number;				private var _timer:Timer;		public function TyporingA(field:TextField,useTimer:Boolean=false,timerSpan:Number=30){						_useTimer = useTimer;						_timerSpan = timerSpan;			                        _field = field;						if(_useTimer){							_timer = new Timer(_timerSpan,0);							_timer.addEventListener(TimerEvent.TIMER,actionInHandler);														}		}                private var _stp:uint;                private var _l:uint;                private var _strTo:String;                private var _str:String;                private var _spd:uint;                public function actionIn(str:String,spd:uint=1):void {                                                _strTo = str;                        _str = "";                        _spd = spd;//                        _field.text = _str;                        _stp = 0;                        var i:uint=5;                        while(i){                                _rndChar+=_strTo.substr(Math.floor(Math.random()*_strTo.length),1);                                i--;                        }                        _rndChar += _strTo;                        _field.text = "";                        _l = _strTo.length;												if(!_useTimer){                        	addEventListener(Event.ENTER_FRAME,actionInHandler);						} else {							_timer.start();						}                }                private function actionInHandler(e:Event):void {                        _str = _strTo.substr(0,_stp);                        var i:uint=_l - _stp;                        while(i){                                var p:Number = Math.floor(Math.random()*_rndChar.length);                                _str += _rndChar.substr(p,1);                               i--;                        }                        _field.text = _str;                        _stp+=_spd;                        if(_stp>_l){                                _field.text = _strTo;                                if(!_useTimer){									removeEventListener(Event.ENTER_FRAME,actionInHandler);								} else {									_timer.stop();								}								                        }                }								public function cancel():void {					if(!_useTimer){						removeEventListener(Event.ENTER_FRAME,actionInHandler);					} else {						_timer.stop();					}				}	}}